{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useAuthContext } from './useAuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nconst useGuestHouse = () => {\n  _s();\n  const [iserror, setError] = useState(null);\n  const [isloading, setLoading] = useState(null);\n  const {\n    dispatch,\n    user\n  } = useAuthContext();\n  const location = useNavigate();\n  const GuestHouse = async ({\n    OwnerEmail,\n    OwnerName,\n    MaxGuest,\n    Room,\n    Kitchen,\n    RentAmount,\n    LimitDays,\n    Address,\n    HouseImg\n  }) => {\n    setError(null);\n    setLoading(true);\n\n    // Create a new FormData instance to handle the files\n    const formData = new FormData();\n    formData.append('OwnerEmail', OwnerEmail);\n    formData.append('OwnerName', OwnerName);\n    formData.append('MaxGuest', MaxGuest);\n    formData.append('Room', Room);\n    formData.append('Kitchen', Kitchen);\n    formData.append('RentAmount', RentAmount);\n    formData.append('LimitDays', LimitDays);\n    formData.append('Address', Address);\n\n    // Append each file to the FormData\n    for (let i = 0; i < HouseImg.length; i++) {\n      formData.append('HouseImg', HouseImg[i]);\n    }\n    console.log(formData);\n    try {\n      const response = await fetch('http://localhost:4000/guesthousedata', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        },\n        body: formData // Send the FormData with files\n      });\n\n      const data = await response.json();\n      if (data.Error) {\n        toast.error(data.Error);\n      } else {\n        toast.success('Successfully stored');\n        location('/ownerhome');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      setError(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    GuestHouse,\n    isloading,\n    iserror\n  };\n};\n_s(useGuestHouse, \"tekAbJK6eQ1MURRi5TMbjVGjzg4=\", false, function () {\n  return [useAuthContext, useNavigate];\n});\nexport default useGuestHouse;","map":{"version":3,"names":["useState","useAuthContext","useNavigate","toast","useGuestHouse","_s","iserror","setError","isloading","setLoading","dispatch","user","location","GuestHouse","OwnerEmail","OwnerName","MaxGuest","Room","Kitchen","RentAmount","LimitDays","Address","HouseImg","formData","FormData","append","i","length","console","log","response","fetch","method","headers","Authorization","token","body","data","json","Error","error","success"],"sources":["C:/NewPrac/Prac/client/src/hooks/useGuestHouse.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { useAuthContext } from './useAuthContext';\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { toast } from 'react-toastify';\r\nconst useGuestHouse = () => {\r\n    const [iserror, setError] = useState(null);\r\n    const [isloading, setLoading] = useState(null);\r\n    const { dispatch, user } = useAuthContext();\r\n    const location = useNavigate();\r\n\r\n    const GuestHouse = async ({ OwnerEmail, OwnerName,  MaxGuest, Room, Kitchen, RentAmount, LimitDays, Address, HouseImg }) => {\r\n        setError(null);\r\n        setLoading(true);\r\n\r\n        // Create a new FormData instance to handle the files\r\n        const formData = new FormData();\r\n        formData.append('OwnerEmail', OwnerEmail);\r\n        formData.append('OwnerName', OwnerName);\r\n        formData.append('MaxGuest', MaxGuest);\r\n        formData.append('Room', Room);\r\n        formData.append('Kitchen', Kitchen);\r\n        formData.append('RentAmount', RentAmount);\r\n        formData.append('LimitDays', LimitDays);\r\n        formData.append('Address', Address);\r\n        \r\n        // Append each file to the FormData\r\n        for (let i = 0; i < HouseImg.length; i++) {\r\n            formData.append('HouseImg', HouseImg[i]);\r\n        }\r\n        console.log(formData)\r\n        try {\r\n            const response = await fetch('http://localhost:4000/guesthousedata', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Authorization: `Bearer ${user.token}`,\r\n                },\r\n                body: formData, // Send the FormData with files\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.Error) {\r\n                toast.error(data.Error);\r\n            } else {\r\n                toast.success('Successfully stored');\r\n                location('/ownerhome');\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            setError(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return { GuestHouse, isloading, iserror };\r\n}\r\n\r\nexport default useGuestHouse"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,gBAAgB;AACtC,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM,CAACC,OAAO,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACQ,SAAS,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM;IAAEU,QAAQ;IAAEC;EAAK,CAAC,GAAGV,cAAc,CAAC,CAAC;EAC3C,MAAMW,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAE9B,MAAMW,UAAU,GAAG,MAAAA,CAAO;IAAEC,UAAU;IAAEC,SAAS;IAAGC,QAAQ;IAAEC,IAAI;IAAEC,OAAO;IAAEC,UAAU;IAAEC,SAAS;IAAEC,OAAO;IAAEC;EAAS,CAAC,KAAK;IACxHf,QAAQ,CAAC,IAAI,CAAC;IACdE,UAAU,CAAC,IAAI,CAAC;;IAEhB;IACA,MAAMc,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEX,UAAU,CAAC;IACzCS,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAEV,SAAS,CAAC;IACvCQ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAET,QAAQ,CAAC;IACrCO,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAER,IAAI,CAAC;IAC7BM,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEP,OAAO,CAAC;IACnCK,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEN,UAAU,CAAC;IACzCI,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAEL,SAAS,CAAC;IACvCG,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEJ,OAAO,CAAC;;IAEnC;IACA,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,QAAQ,CAACK,MAAM,EAAED,CAAC,EAAE,EAAE;MACtCH,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEH,QAAQ,CAACI,CAAC,CAAC,CAAC;IAC5C;IACAE,OAAO,CAACC,GAAG,CAACN,QAAQ,CAAC;IACrB,IAAI;MACA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsC,EAAE;QACjEC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACLC,aAAa,EAAG,UAASvB,IAAI,CAACwB,KAAM;QACxC,CAAC;QACDC,IAAI,EAAEb,QAAQ,CAAE;MACpB,CAAC,CAAC;;MAEF,MAAMc,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAElC,IAAID,IAAI,CAACE,KAAK,EAAE;QACZpC,KAAK,CAACqC,KAAK,CAACH,IAAI,CAACE,KAAK,CAAC;MAC3B,CAAC,MAAM;QACHpC,KAAK,CAACsC,OAAO,CAAC,qBAAqB,CAAC;QACpC7B,QAAQ,CAAC,YAAY,CAAC;MAC1B;IAEJ,CAAC,CAAC,OAAO4B,KAAK,EAAE;MACZZ,OAAO,CAACY,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;MAC9BjC,QAAQ,CAACiC,KAAK,CAAC;IACnB,CAAC,SAAS;MACN/B,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,OAAO;IAAEI,UAAU;IAAEL,SAAS;IAAEF;EAAQ,CAAC;AAC7C,CAAC;AAAAD,EAAA,CArDKD,aAAa;EAAA,QAGYH,cAAc,EACxBC,WAAW;AAAA;AAmDhC,eAAeE,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}