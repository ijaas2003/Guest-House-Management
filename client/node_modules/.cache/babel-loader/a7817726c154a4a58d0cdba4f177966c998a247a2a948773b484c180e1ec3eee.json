{"ast":null,"code":"import _slicedToArray from \"C:/NewPrac/Prac/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"sx\"];\nimport * as React from 'react';\nimport useEnhancedEffect from '@mui/utils/useEnhancedEffect';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { useViews } from '../useViews';\nimport { isTimeView } from '../../utils/time-utils';\n\n/**\n * Props used to handle the views that are common to all pickers.\n */\n\n/**\n * Props used to handle the views of the pickers.\n */\n\n/**\n * Props used to handle the value of the pickers.\n */\n\n/**\n * Manage the views of all the pickers:\n * - Handles the view switch\n * - Handles the switch between UI views and field views\n * - Handles the focus management when switching views\n */\nexport var usePickerViews = function usePickerViews(_ref) {\n  var props = _ref.props,\n    propsFromPickerValue = _ref.propsFromPickerValue,\n    additionalViewProps = _ref.additionalViewProps,\n    inputRef = _ref.inputRef,\n    autoFocusView = _ref.autoFocusView;\n  var onChange = propsFromPickerValue.onChange,\n    open = propsFromPickerValue.open,\n    onSelectedSectionsChange = propsFromPickerValue.onSelectedSectionsChange,\n    onClose = propsFromPickerValue.onClose;\n  var views = props.views,\n    openTo = props.openTo,\n    onViewChange = props.onViewChange,\n    disableOpenPicker = props.disableOpenPicker,\n    viewRenderers = props.viewRenderers,\n    timezone = props.timezone;\n  var propsToForwardToView = _objectWithoutPropertiesLoose(props, _excluded);\n  var _useViews = useViews({\n      view: undefined,\n      views: views,\n      openTo: openTo,\n      onChange: onChange,\n      onViewChange: onViewChange,\n      autoFocus: autoFocusView\n    }),\n    view = _useViews.view,\n    setView = _useViews.setView,\n    defaultView = _useViews.defaultView,\n    focusedView = _useViews.focusedView,\n    setFocusedView = _useViews.setFocusedView,\n    setValueAndGoToNextView = _useViews.setValueAndGoToNextView;\n  var _React$useMemo = React.useMemo(function () {\n      return views.reduce(function (acc, viewForReduce) {\n        var viewMode;\n        if (disableOpenPicker) {\n          viewMode = 'field';\n        } else if (viewRenderers[viewForReduce] != null) {\n          viewMode = 'UI';\n        } else {\n          viewMode = 'field';\n        }\n        acc.viewModeLookup[viewForReduce] = viewMode;\n        if (viewMode === 'UI') {\n          acc.hasUIView = true;\n        }\n        return acc;\n      }, {\n        hasUIView: false,\n        viewModeLookup: {}\n      });\n    }, [disableOpenPicker, viewRenderers, views]),\n    hasUIView = _React$useMemo.hasUIView,\n    viewModeLookup = _React$useMemo.viewModeLookup;\n  var timeViewsCount = React.useMemo(function () {\n    return views.reduce(function (acc, viewForReduce) {\n      if (viewRenderers[viewForReduce] != null && isTimeView(viewForReduce)) {\n        return acc + 1;\n      }\n      return acc;\n    }, 0);\n  }, [viewRenderers, views]);\n  var currentViewMode = viewModeLookup[view];\n  var shouldRestoreFocus = useEventCallback(function () {\n    return currentViewMode === 'UI';\n  });\n  var _React$useState = React.useState(currentViewMode === 'UI' ? view : null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    popperView = _React$useState2[0],\n    setPopperView = _React$useState2[1];\n  if (popperView !== view && viewModeLookup[view] === 'UI') {\n    setPopperView(view);\n  }\n  useEnhancedEffect(function () {\n    // Handle case of `DateTimePicker` without time renderers\n    if (currentViewMode === 'field' && open) {\n      onClose();\n      setTimeout(function () {\n        // focusing the input before the range selection is done\n        // calling `onSelectedSectionsChange` outside of timeout results in an inconsistent behavior between Safari And Chrome\n        inputRef == null || inputRef.current.focus();\n        onSelectedSectionsChange(view);\n      });\n    }\n  }, [view]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEnhancedEffect(function () {\n    if (!open) {\n      return;\n    }\n    var newView = view;\n\n    // If the current view is a field view, go to the last popper view\n    if (currentViewMode === 'field' && popperView != null) {\n      newView = popperView;\n    }\n\n    // If the current view is not the default view and both are UI views\n    if (newView !== defaultView && viewModeLookup[newView] === 'UI' && viewModeLookup[defaultView] === 'UI') {\n      newView = defaultView;\n    }\n    if (newView !== view) {\n      setView(newView);\n    }\n    setFocusedView(newView, true);\n  }, [open]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  var layoutProps = {\n    views: views,\n    view: popperView,\n    onViewChange: setView\n  };\n  return {\n    hasUIView: hasUIView,\n    shouldRestoreFocus: shouldRestoreFocus,\n    layoutProps: layoutProps,\n    renderCurrentView: function renderCurrentView() {\n      if (popperView == null) {\n        return null;\n      }\n      var renderer = viewRenderers[popperView];\n      if (renderer == null) {\n        return null;\n      }\n      return renderer(_extends({}, propsToForwardToView, additionalViewProps, propsFromPickerValue, {\n        views: views,\n        timezone: timezone,\n        onChange: setValueAndGoToNextView,\n        view: popperView,\n        onViewChange: setView,\n        focusedView: focusedView,\n        onFocusedViewChange: setFocusedView,\n        showViewSwitcher: timeViewsCount > 1,\n        timeViewsCount: timeViewsCount\n      }));\n    }\n  };\n};","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_excluded","React","useEnhancedEffect","useEventCallback","useViews","isTimeView","usePickerViews","_ref","props","propsFromPickerValue","additionalViewProps","inputRef","autoFocusView","onChange","open","onSelectedSectionsChange","onClose","views","openTo","onViewChange","disableOpenPicker","viewRenderers","timezone","propsToForwardToView","_useViews","view","undefined","autoFocus","setView","defaultView","focusedView","setFocusedView","setValueAndGoToNextView","_React$useMemo","useMemo","reduce","acc","viewForReduce","viewMode","viewModeLookup","hasUIView","timeViewsCount","currentViewMode","shouldRestoreFocus","_React$useState","useState","_React$useState2","_slicedToArray","popperView","setPopperView","setTimeout","current","focus","newView","layoutProps","renderCurrentView","renderer","onFocusedViewChange","showViewSwitcher"],"sources":["C:/NewPrac/Prac/client/node_modules/@mui/x-date-pickers/internals/hooks/usePicker/usePickerViews.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"className\", \"sx\"];\nimport * as React from 'react';\nimport useEnhancedEffect from '@mui/utils/useEnhancedEffect';\nimport useEventCallback from '@mui/utils/useEventCallback';\nimport { useViews } from '../useViews';\nimport { isTimeView } from '../../utils/time-utils';\n\n/**\n * Props used to handle the views that are common to all pickers.\n */\n\n/**\n * Props used to handle the views of the pickers.\n */\n\n/**\n * Props used to handle the value of the pickers.\n */\n\n/**\n * Manage the views of all the pickers:\n * - Handles the view switch\n * - Handles the switch between UI views and field views\n * - Handles the focus management when switching views\n */\nexport const usePickerViews = ({\n  props,\n  propsFromPickerValue,\n  additionalViewProps,\n  inputRef,\n  autoFocusView\n}) => {\n  const {\n    onChange,\n    open,\n    onSelectedSectionsChange,\n    onClose\n  } = propsFromPickerValue;\n  const {\n    views,\n    openTo,\n    onViewChange,\n    disableOpenPicker,\n    viewRenderers,\n    timezone\n  } = props;\n  const propsToForwardToView = _objectWithoutPropertiesLoose(props, _excluded);\n  const {\n    view,\n    setView,\n    defaultView,\n    focusedView,\n    setFocusedView,\n    setValueAndGoToNextView\n  } = useViews({\n    view: undefined,\n    views,\n    openTo,\n    onChange,\n    onViewChange,\n    autoFocus: autoFocusView\n  });\n  const {\n    hasUIView,\n    viewModeLookup\n  } = React.useMemo(() => views.reduce((acc, viewForReduce) => {\n    let viewMode;\n    if (disableOpenPicker) {\n      viewMode = 'field';\n    } else if (viewRenderers[viewForReduce] != null) {\n      viewMode = 'UI';\n    } else {\n      viewMode = 'field';\n    }\n    acc.viewModeLookup[viewForReduce] = viewMode;\n    if (viewMode === 'UI') {\n      acc.hasUIView = true;\n    }\n    return acc;\n  }, {\n    hasUIView: false,\n    viewModeLookup: {}\n  }), [disableOpenPicker, viewRenderers, views]);\n  const timeViewsCount = React.useMemo(() => views.reduce((acc, viewForReduce) => {\n    if (viewRenderers[viewForReduce] != null && isTimeView(viewForReduce)) {\n      return acc + 1;\n    }\n    return acc;\n  }, 0), [viewRenderers, views]);\n  const currentViewMode = viewModeLookup[view];\n  const shouldRestoreFocus = useEventCallback(() => currentViewMode === 'UI');\n  const [popperView, setPopperView] = React.useState(currentViewMode === 'UI' ? view : null);\n  if (popperView !== view && viewModeLookup[view] === 'UI') {\n    setPopperView(view);\n  }\n  useEnhancedEffect(() => {\n    // Handle case of `DateTimePicker` without time renderers\n    if (currentViewMode === 'field' && open) {\n      onClose();\n      setTimeout(() => {\n        // focusing the input before the range selection is done\n        // calling `onSelectedSectionsChange` outside of timeout results in an inconsistent behavior between Safari And Chrome\n        inputRef == null || inputRef.current.focus();\n        onSelectedSectionsChange(view);\n      });\n    }\n  }, [view]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEnhancedEffect(() => {\n    if (!open) {\n      return;\n    }\n    let newView = view;\n\n    // If the current view is a field view, go to the last popper view\n    if (currentViewMode === 'field' && popperView != null) {\n      newView = popperView;\n    }\n\n    // If the current view is not the default view and both are UI views\n    if (newView !== defaultView && viewModeLookup[newView] === 'UI' && viewModeLookup[defaultView] === 'UI') {\n      newView = defaultView;\n    }\n    if (newView !== view) {\n      setView(newView);\n    }\n    setFocusedView(newView, true);\n  }, [open]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const layoutProps = {\n    views,\n    view: popperView,\n    onViewChange: setView\n  };\n  return {\n    hasUIView,\n    shouldRestoreFocus,\n    layoutProps,\n    renderCurrentView: () => {\n      if (popperView == null) {\n        return null;\n      }\n      const renderer = viewRenderers[popperView];\n      if (renderer == null) {\n        return null;\n      }\n      return renderer(_extends({}, propsToForwardToView, additionalViewProps, propsFromPickerValue, {\n        views,\n        timezone,\n        onChange: setValueAndGoToNextView,\n        view: popperView,\n        onViewChange: setView,\n        focusedView,\n        onFocusedViewChange: setFocusedView,\n        showViewSwitcher: timeViewsCount > 1,\n        timeViewsCount\n      }));\n    }\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}